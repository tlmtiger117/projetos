# 20/02/26
#|---------------------------Criando Rede Inetrna Virtual com Sub-Redes--------------------------------------|

Fluxo do funcionamento da rede virtual inetrna:

   LAN_1 (Metaspotable)                       LAN_2(ubuntu server)                            
+------------------------+                  +------------------------+
|rede: enp0s3            |                  | rede: enp0s8           |
| host: 192.168.1.2      |                  | host: 192.168.2.1      |
| máscara: 255.255.255.0 |                  | máscara: 255.255.255.0 |
| gateway: 192.168.1.1   |                  | gateway: 192.168.2.1   |
+------------------------+                  +------------------------+
                          \                 /
                           \               /
                            \             /
                             \           /
                              \         /
                   VM roteador/gateway(ubunto server)
                  +----------------------------------+
                  |      faz parte das 2 redes       |
                  |                                  |
                  |         LAN_1: enp0s3            |
                  |         LAN_2: enp0s8            |
                  +----------------------------------+

                  

|------------------------Arquivos de configuração de rede e explicação simples dasVMS------------------------|

1-(METASPOTABLE): VM vulneravel propositalmente, utilizada para testes de segurança/redes.

  - arquivo: /etc/networking/interfaces
  - comando: sudo nano /etc/networking/interfaces
  - dai é só ir configurando a rede(definir ineterface,ip,máscara,e roteador(opcional por ser rede inetrna)).


2-(Ubuntu Server): sistema operacional utilizado por servidores. é leve e confiável se configurado do jeito
                   certo.

  - arquivo: /etc/netplan/<arquivo> # o arquivo no ubunto server pode variar, por isso sempre conferir.
  - comando: sudo nano /etc/netplan/00-installer-config.yaml
  - depois é só seguir configurando a rede como na METASPOTABLE.

3-(Roteador/gateway:) utilizado para comunicação externa a sua rede(outra LAN ou acessando a internet)
                     - o roteador não fica com os dados, ele simplesmte repassa para o ip de destino
                       e retorna a resposta dele fazendo o caminho inevrso.

  - arquivo(no Ubuntu server): /etc/netplan/<arquivo>
    comando: sudo nano /etc/netplan/<arquivo>

  - forward(repasse)comando: sudo sysctl -w net.ipv4.ip_forward=1
    . utilizado para repassar os dados de uma rede para a outra
    . este comando é temporário, ou seja, sempre que desligar a VM/resetar, tem que reativar de novo(0 = inativo 1= ativo)

  - no roteador, você tem que definir 2 interfaces de rede no seu virtualuizador(eu utilizei Vitual box)
     nomeu caso, é a "rede interna".
  - isso é nencessário para o roteador fazer o repasse de dados entre redes. sem isso, não tem como repassar
     as informações.

- Minhas dificuldades: Em relação a esse projeto, eu tive dificuldades na parte dos Adaptadores de rede e no
   roteador. lembro de tenatr fazer uma configuração de sub_rede mas sem ter uma VM específica pra isso.
   a soluçaõ que tive foi pesquisar um pouco usando IA(potencial absurdo se usado do jeito certo) pra tirar
   dúvidas e propor soluções pra minha realidade. foi aí que cheguei na comclusão de que os probleas estavam
   nos Adaptadores de rede(roteador apeans com 1, mas é necessário 2 pro repasse de dados) e no rotedor
   (configurações de rede e ips erradas,dhcp automático e tipo de rede errado/trocados).
   Acho que se eu tiver esse mesmo problemas hoje em dia, conseguiria resolver em 1 a 2 horas.
                  

Resumo: Configure as VMS cleintes em redes diferentes
      - tenha uma VM específica pro roteamento
      - roteador com 2 adaptadores de rede/interface(da cliente 1 e 2)
      - teste e salve com snapshots em todas as VMs.
    
  
                   
    
  
  





                  



  
